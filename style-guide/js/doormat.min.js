"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(){var a={CLASS:"hentry",CURRENT_CLASS:"current",NEXT:"next",PREVIOUS:"previous",RESET:"reset",ERROR_MSG:"Doormat: Must assign root element with class",DOWN:"D",UP:"U"},b={debounce:150,snapping:{travel:!1,viewport:!0,threshold:30,duration:".25s"}},c=function(a,b){var c=void 0;return function(){var d=this,e=arguments;return clearTimeout(c),c=setTimeout(function(){return a.apply(d,e)},b)}},d=function a(b,c){var d={};for(var e in b){var f=e.toUpperCase();if(d[f]=b[e],c.hasOwnProperty(e)){var g=c[e];d[f]="object"===("undefined"==typeof g?"undefined":_typeof(g))?a(d[f],g):g}}return d},e=function(){function e(f){_classCallCheck(this,e);var g=this;if(g.el=document.querySelector("."+a.CLASS),!g.el)throw Error(a.ERROR_MSG);"onorientationchange"in window?window.onorientationchange=g.calibrate.bind(this):window.onresize=c(g.calibrate.bind(this),100),window.onscroll=g.__handleScroll.bind(this),g.panels=g.el.children,g._OPTS=d(b,f),g.CURRENT=g.panels[0],g.CURRENT.className+=" "+a.CURRENT_CLASS,g.calibrate()}return _createClass(e,[{key:"__setPanel",value:function(b){var c=this,d=c.CURRENT;d.className=d.className.replace(a.CURRENT_CLASS,"").trim(),d.style.top=b===a.NEXT?"-"+d.offsetHeight+"px":0,c.CURRENT=b===a.RESET?c.panels[0]:d[b+"ElementSibling"],c.CURRENT.className+=" "+a.CURRENT_CLASS}},{key:"calibrate",value:function(b){var c=this;c.TRACK_HEIGHT=0,c.HEIGHT="onorientationchange"in window?screen.height:window.innerHeight;for(var d=c.panels,e=0;e<d.length;e++){var f=d[e];f.style.zIndex=999-e,f.style.minHeight=c.HEIGHT+"px",f.style.display="block",f.style.visibility="visible",f.HEIGHT=f.offsetHeight,f.STARTING_POS=c.TRACK_HEIGHT,c.TRACK_HEIGHT=c.TRACK_HEIGHT+f.offsetHeight}c.SNAP_THRESHOLD=c.HEIGHT*(c._OPTS.SNAPPING.THRESHOLD/100),document.body.style.height=c.TRACK_HEIGHT+"px",b&&(window.scrollTo(0,0),c.__setPanel(a.RESET))}},{key:"inSnapRegion",value:function(){var b=this,c=b.CURRENT,d=c.offsetHeight,e=b.SNAP_THRESHOLD,f=b._OPTS.SNAPPING,g=Math.abs(parseInt(c.style.top,10));b.SNAP_TOP=!1,b.SNAP_BOTTOM=!1;var h=g<d&&g>d-e,i=g<d-e&&g>d-b.HEIGHT&&b.SCROLL_DIR===a.UP;b.SNAP_TOP=f.VIEWPORT?h:i;var j=g<d-b.HEIGHT+e&&g>d-b.HEIGHT,k=g>d-b.HEIGHT+e&&b.SCROLL_DIR===a.DOWN;return b.SNAP_BOTTOM=f.VIEWPORT?j:k,b.SNAP_TOP||b.SNAP_BOTTOM}},{key:"__handleScroll",value:function(b){var c=this,d=c.CURRENT,e=window.scrollY||window.pageYOffset;c.SCROLL_DIR=e>c.SCROLL_LAST?a.DOWN:a.UP,c.SCROLL_LAST=e,d.style.top=d.STARTING_POS-e+"px",e>d.STARTING_POS+d.HEIGHT||e===d.STARTING_POS+d.HEIGHT?d.nextElementSibling&&c.__setPanel(a.NEXT):e<d.STARTING_POS&&d.previousElementSibling&&c.__setPanel(a.PREVIOUS);var f=c._OPTS.SNAPPING;if(f&&(f.VIEWPORT||f.TRAVEL)&&c.inSnapRegion()){var g=c.__handleSnap;clearTimeout(g.__TIMER),g.__TIMER=setTimeout(g.bind(c),c._OPTS.DEBOUNCE)}}},{key:"__handleSnap",value:function(){var b=this,c=b.CURRENT,d=b._OPTS.SNAPPING.VIEWPORT,e=function(){c.style.transitionProperty=null,c.style.transitionDuration=null},f=function(){c.style.transitionProperty="top",c.style.transitionDuration=b._OPTS.SNAPPING.DURATION,c.addEventListener("transitionend",e)},g=function(){c.style.top="-"+c.offsetHeight+"px",b.__setPanel(a.NEXT),window.scrollTo(0,b.CURRENT.STARTING_POS)},h=function(){window.scrollTo(0,c.STARTING_POS+(c.offsetHeight-b.HEIGHT))};b.inSnapRegion()&&(f(),b.SNAP_TOP?d?g():h():b.SNAP_BOTTOM&&(d?h():g()))}}]),e}();window.Doormat=e}();
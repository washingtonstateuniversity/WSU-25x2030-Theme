!function(a){"use strict";var b=function(){return!!window.navigator.userAgent.match(/(iPad|iPhone|iPod)/gi)},c=function(){return!!window.navigator.userAgent.match(/(Android)/gi)},d=function(){var b,c=function(){return a(document).height()-a(window).height()},d=function(){return a(window).scrollTop()},e=c(),f=function(){a(window).width()>791&&(b=d()/e*100+"%",a(".progress").css({width:b}))};a(document).on("scroll",f),a(window).on("resize",function(){e=c(),f()})},e=function(){var b=25,c=b/a(window).height(),d=b/a(window).width();a("#top").on("mousemove",function(b){var e=b.pageX-a(window).width()/2,f=b.pageY-a(window).height()/2,g=-(d*e)-25,h=-(c*f)-50;a(".image").css("transform","matrix(1, 0, 0, 1, "+g+", "+h+")")})};window.Doormat.prototype.go_to=function(b){var c=document.querySelectorAll(".panel");if(!c[b-1])throw Error("Doormat: no panel available at that index!");var d=c[b-1].STARTING_POS;void 0!==d&&a("body").animate({scrollTop:d})};var f=function(){a(".site-menu, .spine-sitenav").on("click","a",function(b){b.preventDefault();var c=a(this).parent("li"),d=c.index()+2;drive_doormat.go_to(d),c.addClass("dogeared").siblings().removeClass("dogeared")})},g=function(){window.addEventListener("scroll",function(){if(a(window).width()>791){var b=a(".panel"),c=a(".site-menu li");a.each(b,function(b){a(this).hasClass("current")&&c.eq(b-1).addClass("dogeared").siblings().removeClass("dogeared")})}},250)},h=function(){var b=a("#stories .column");a(document).on("scroll",function(){a(window).width()>791&&a.each(b,function(b){var c=a(this),d=c.hasClass("excerpt")?-2+b:2+b,e=-(a(window).scrollTop()-c.offset().top)/parseInt(d);a(this).css("transform","translateY("+e+"px)")})})};a(document).ready(function(){b()||c()||(d(),e(),h()),f(),g()})}(jQuery);